<?xml version="1.0"?><Report><ReportQuery><Format><ReportTitle>Vehicle Event Log</ReportTitle><ReportDescription></ReportDescription><PageSize>A4</PageSize><PageOrientation>Portrait</PageOrientation><TopMargin>1%</TopMargin><BottomMargin>1%</BottomMargin><RightMargin>5%</RightMargin><LeftMargin>5%</LeftMargin><pdfFont>Helvetica</pdfFont><pdfFontSize>8.0</pdfFontSize><PreExecuteCode>$dfrom = $_criteria[&quot;event_date&quot;]-&gt;get_criteria_value(&quot;RANGE1&quot;);
$dto = $_criteria[&quot;event_date&quot;]-&gt;get_criteria_value(&quot;RANGE2&quot;);
$vh = $_criteria[&quot;vehicle&quot;]-&gt;get_criteria_value(&quot;VALUE&quot;);
$mt = $_criteria[&quot;msg_type&quot;]-&gt;get_criteria_value(&quot;VALUE&quot;);
$op = $_criteria[&quot;operator&quot;]-&gt;get_criteria_value(&quot;VALUE&quot;);

$from=substr($dfrom,7,4).&quot;-&quot;.substr($dfrom,4,2).&quot;-&quot;.substr($dfrom,1,2).&quot; 00:00:00&quot;;
$to=substr($dto,7,4).&quot;-&quot;.substr($dto,4,2).&quot;-&quot;.substr($dto,1,2).&quot; 23:59:59&quot;;


$sql = 
&quot;SELECT unit_log.* 
FROM operator, cent_user, vehicle, unit_build, unit_log, outer message_type 
WHERE 1 = 1          
AND (
operator.operator_id = cent_user.operator_id
OR cent_user.operator_id IS NULL )
AND cent_user.usernm = USER
AND operator.operator_id = vehicle.operator_id   
AND vehicle.build_id = unit_build.build_id  
AND unit_log.build_id = unit_build.build_id  
AND message_type.msg_type = unit_log.message_type&quot;;

$sql .= &quot; AND unit_log.log_time between '$from' and '$to'&quot;;

if ( $mt )
$sql .= &quot; AND unit_log.message_type in ($mt)&quot;;
if ( $op )
$sql .= &quot; AND operator.operator_id in ($op)&quot;;
if ( $vh )
$sql .= &quot; AND vehicle.vehicle_id in ($vh)&quot;;


$sql .= &quot; INTO TEMP t_unit_log WITH NO LOG&quot;; 

$ds-&gt;Execute($sql) or print $ds-&gt;ErrorMsg();


</PreExecuteCode><bodyDisplay>show</bodyDisplay><graphDisplay>show</graphDisplay></Format><Datasource><SourceType>database</SourceType><SourceConnection><DatabaseType></DatabaseType><DatabaseName>centurion</DatabaseName><HostName>centlive_tcp</HostName><ServiceName>?Unknown?</ServiceName><UserName></UserName><Password></Password></SourceConnection></Datasource><EntryForm><Query><TableSql>operator, cent_user, vehicle, unit_build, t_unit_log, outer message_type</TableSql><WhereSql>          
AND (
operator.operator_id = cent_user.operator_id
OR cent_user.operator_id IS NULL )
AND cent_user.usernm = USER
AND operator.operator_id = vehicle.operator_id   
AND vehicle.build_id = unit_build.build_id  
AND t_unit_log.build_id = unit_build.build_id  
AND message_type.msg_type = t_unit_log.message_type</WhereSql><GroupSql></GroupSql><RowSelection>all</RowSelection><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>vehicle_code</Name><TableName>vehicle</TableName><ColumnName>vehicle_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Vehicle</column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>vehicle_reg</Name><TableName>vehicle</TableName><ColumnName>vehicle_reg</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Reg. No.</column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>operator_code</Name><TableName>operator</TableName><ColumnName>operator_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>legal_name</Name><TableName>operator</TableName><ColumnName>legal_name</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>message_type</Name><TableName>t_unit_log</TableName><ColumnName>message_type</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Event Type</column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>message_text</Name><TableName>t_unit_log</TableName><ColumnName>message_text</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>log_time</Name><TableName></TableName><ColumnName>log_time</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Event Time</column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>build_code</Name><TableName></TableName><ColumnName>build_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Build Code</column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>latitude</Name><TableName></TableName><ColumnName>gpslat_str</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>longitude</Name><TableName></TableName><ColumnName>gpslong_str</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>description</Name><TableName>message_type</TableName><ColumnName>description</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>opname</Name><TableName></TableName><ColumnName></ColumnName><ColumnType>char</ColumnType><ColumnLength></ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Operator Name</column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>golap</Name><TableName></TableName><ColumnName></ColumnName><ColumnType></ColumnType><ColumnLength></ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn></QueryColumns><OrderColumns><OrderColumn><Name>operator_code</Name><OrderType>ASC</OrderType></OrderColumn><OrderColumn><Name>vehicle_code</Name><OrderType>ASC</OrderType></OrderColumn><OrderColumn><Name>log_time</Name><OrderType></OrderType></OrderColumn></OrderColumns><PreSQLS></PreSQLS></Query><Assignments><Assignment><AssignName>opname</AssignName><AssignNameNew></AssignNameNew><Expression>{operator_code}.&quot;/&quot;.{legal_name}</Expression><Condition></Condition></Assignment><Assignment><AssignName>golap</AssignName><AssignNameNew></AssignNameNew><Expression>'Filters=Message Type;Vehicle Code,PlotType=Icon'</Expression><Condition></Condition></Assignment></Assignments><Criteria><CriteriaItem><Name>operator</Name><Title>Operator</Title><QueryTableName></QueryTableName><QueryColumnName>operator.operator_id</QueryColumnName><CriteriaType>LOOKUP</CriteriaType><CriteriaDisplay>TEXTFIELD</CriteriaDisplay><ExpandDisplay>MULTI</ExpandDisplay><ReturnColumn>operator_id</ReturnColumn><DisplayColumn>full</DisplayColumn><OverviewColumn>operator_code</OverviewColumn><MatchColumn>legal_name</MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql>operator, cent_user</TableSql><WhereSql> 
AND (
operator.operator_id = cent_user.operator_id
OR cent_user.operator_id IS NULL )
AND cent_user.usernm = USER</WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>operator_id</Name><TableName>operator</TableName><ColumnName>operator_id</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>operator_code</Name><TableName>operator</TableName><ColumnName>operator_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>legal_name</Name><TableName>operator</TableName><ColumnName>legal_name</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>full</Name><TableName></TableName><ColumnName></ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><Assignments><Assignment><AssignName>full</AssignName><AssignNameNew></AssignNameNew><Expression>{operator_code}.'/'.{legal_name}</Expression><Condition></Condition></Assignment></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem><CriteriaItem><Name>vehicle</Name><Title>Vehicle</Title><QueryTableName></QueryTableName><QueryColumnName>vehicle.vehicle_code</QueryColumnName><CriteriaType>LOOKUP</CriteriaType><CriteriaDisplay>TEXTFIELD</CriteriaDisplay><ExpandDisplay>MULTI</ExpandDisplay><ReturnColumn>vehicle_code</ReturnColumn><DisplayColumn>full</DisplayColumn><OverviewColumn>vehicle_code</OverviewColumn><MatchColumn>vehicle_id</MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql>vehicle, cent_user</TableSql><WhereSql>  
AND (
vehicle.operator_id = cent_user.operator_id
OR cent_user.operator_id IS NULL )
AND cent_user.usernm = USER </WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>vehicle_id</Name><TableName>vehicle</TableName><ColumnName>vehicle_id</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>vehicle_code</Name><TableName>vehicle</TableName><ColumnName>vehicle_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>vehicle_reg</Name><TableName>vehicle</TableName><ColumnName>vehicle_reg</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>full</Name><TableName></TableName><ColumnName></ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><Assignments><Assignment><AssignName>full</AssignName><AssignNameNew></AssignNameNew><Expression>{vehicle_code}.'/'.{vehicle_reg}</Expression><Condition></Condition></Assignment></Assignments></Query><CriteriaLinks><CriteriaLink><LinkFrom>vehicle</LinkFrom><LinkTo>operator</LinkTo><LinkClause>vehicle.operator_id</LinkClause></CriteriaLink></CriteriaLinks></CriteriaItem><CriteriaItem><Name>event_date</Name><Title>Date</Title><QueryTableName></QueryTableName><QueryColumnName></QueryColumnName><CriteriaType>DATERANGE</CriteriaType><CriteriaDisplay>DMYFIELD</CriteriaDisplay><ExpandDisplay>NOINPUT</ExpandDisplay><ReturnColumn></ReturnColumn><DisplayColumn></DisplayColumn><OverviewColumn></OverviewColumn><MatchColumn></MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQL><QuerySql></QuerySql></SQL><QueryColumns></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem><CriteriaItem><Name>msg_type</Name><Title>Message Type</Title><QueryTableName></QueryTableName><QueryColumnName></QueryColumnName><CriteriaType>TEXTFIELD</CriteriaType><CriteriaDisplay>NOINPUT</CriteriaDisplay><ExpandDisplay>NOINPUT</ExpandDisplay><ReturnColumn></ReturnColumn><DisplayColumn></DisplayColumn><OverviewColumn></OverviewColumn><MatchColumn></MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQL><QuerySql></QuerySql></SQL><QueryColumns></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem></Criteria><Output><PageHeaders></PageHeaders><PageFooters></PageFooters><DisplayOrders><DisplayOrder><ColumnName>log_time</ColumnName><OrderNumber>1</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>message_type</ColumnName><OrderNumber>2</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>message_text</ColumnName><OrderNumber>3</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>description</ColumnName><OrderNumber>4</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>vehicle_code</ColumnName><OrderNumber>5</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>vehicle_reg</ColumnName><OrderNumber>6</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>operator_code</ColumnName><OrderNumber>7</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>legal_name</ColumnName><OrderNumber>8</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>opname</ColumnName><OrderNumber>9</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>build_code</ColumnName><OrderNumber>10</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>latitude</ColumnName><OrderNumber>11</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>longitude</ColumnName><OrderNumber>12</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>golap</ColumnName><OrderNumber>13</OrderNumber></DisplayOrder></DisplayOrders><Groups><Group><GroupName>vehicle_code</GroupName><BeforeGroupHeader>blankline</BeforeGroupHeader><AfterGroupHeader>blankline</AfterGroupHeader><BeforeGroupTrailer>blankline</BeforeGroupTrailer><AfterGroupTrailer>blankline</AfterGroupTrailer><GroupHeaders><GroupHeader><GroupHeaderColumn>opname</GroupHeaderColumn></GroupHeader><GroupHeader><GroupHeaderColumn>vehicle_code</GroupHeaderColumn></GroupHeader><GroupHeader><GroupHeaderColumn>vehicle_reg</GroupHeaderColumn></GroupHeader><GroupHeader><GroupHeaderColumn>build_code</GroupHeaderColumn></GroupHeader></GroupHeaders><GroupTrailers></GroupTrailers></Group></Groups><Graphs></Graphs></Output></EntryForm></ReportQuery></Report>