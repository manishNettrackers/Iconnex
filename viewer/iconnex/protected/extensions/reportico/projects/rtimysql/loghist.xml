<?xml version="1.0"?><Report><ReportQuery><Format><ReportTitle>Route Log History</ReportTitle><ReportDescription>Provides an indication, for a specified set of vehicles and a specified period of which log files have been loaded into the Centurion database</ReportDescription><PageSize>A4</PageSize><PageOrientation>Portrait</PageOrientation><TopMargin>1%</TopMargin><BottomMargin>1%</BottomMargin><RightMargin>5%</RightMargin><LeftMargin>5%</LeftMargin><pdfFont>Helvetica</pdfFont><pdfFontSize>8.0</pdfFontSize><PreExecuteCode>$critdr = $lk[&quot;daterange&quot;]-&gt;get_criteria_clause(false, false, true);

if ( preg_match_all ( &quot;/..\/..\/..../&quot;, $critdr, $matches ) )
{
    $from =  $matches[0][0];
    $to = $matches[0][1];
}

$from = $_criteria[&quot;daterange&quot;]-&gt;get_criteria_value(&quot;RANGE1&quot;);
$to = $_criteria[&quot;daterange&quot;]-&gt;get_criteria_value(&quot;RANGE2&quot;);


$sql = &quot;create temp table t_dates ( dateval date )&quot;;
$retval =  $ds-&gt;Execute($sql)
            or die(&quot;Date Table Creation failed : &quot; . $ds-&gt;ErrorMsg());


$fy=substr($from, 7, 4);
$fm=substr($from, 4, 2);
$fd=substr($from, 1, 2);

$ty=substr($to, 7, 4);
$tm=substr($to, 4, 2);
$td=substr($to, 1, 2);

$ftime = gmmktime( 0, 0, 0, $fm, $fd, $fy );
$ttime = gmmktime( 0, 0, 0, $tm, $td, $ty );

while ( $ftime &lt;= $ttime )
{
    $dt = gmdate(&quot;d/m/Y&quot;, $ftime);

    $sql = &quot;insert into t_dates values ( '&quot;.$dt.&quot;' );&quot;;
    $retval =  $ds-&gt;Execute($sql) 
            or die($sql.&quot; - Date Table Insert failed : &quot; . $ds-&gt;ErrorMsg());

    $ftime += 60 * 60 * 24;
    if ( $ftime &gt; $ttime )
        break;    
}</PreExecuteCode><bodyDisplay>show</bodyDisplay><graphDisplay>show</graphDisplay></Format><Datasource><SourceType>database</SourceType><SourceConnection><DatabaseType>informix</DatabaseType><DatabaseName>centurion</DatabaseName><HostName>centlive_tcp</HostName><ServiceName>?Unknown?</ServiceName><UserName></UserName><Password></Password></SourceConnection></Datasource><EntryForm><Query><TableSql>operator,cent_user,unit_build,t_dates,outer unit_log_hist,vehicle</TableSql><WhereSql>  
AND (
operator.operator_id = cent_user.operator_id
OR cent_user.operator_id IS NULL )
AND cent_user.usernm = USER
AND operator.operator_id = unit_build.operator_id
AND unit_log_hist.build_id = unit_build.build_id
AND vehicle.build_id = unit_build.build_id
AND t_dates.dateval = unit_log_hist.logfile_date
AND unit_type = &quot;BUS&quot;</WhereSql><GroupSql></GroupSql><RowSelection>all</RowSelection><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>vehicle_code</Name><TableName>vehicle</TableName><ColumnName>vehicle_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Vehicle Code</column_title><tooltip></tooltip><group_header_label>VehicleCode</group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>operator_code</Name><TableName>operator</TableName><ColumnName>operator_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Operator Code</column_title><tooltip></tooltip><group_header_label>Operator Code</group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>legal_name</Name><TableName>operator</TableName><ColumnName>legal_name</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Operator Name</column_title><tooltip></tooltip><group_header_label>Operator Name</group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>build_code</Name><TableName>unit_build</TableName><ColumnName>build_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Inventory Code</column_title><tooltip></tooltip><group_header_label>Inventory Code</group_header_label><group_header_label_xpos>5%</group_header_label_xpos><group_header_data_xpos>20%</group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>logfile_date</Name><TableName>unit_log_hist</TableName><ColumnName>logfile_date</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>load_db_time</Name><TableName>unit_log_hist</TableName><ColumnName>load_db_time</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Database Load Time</column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>load_wlan_time</Name><TableName>unit_log_hist</TableName><ColumnName>load_wlan_time</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Bus Collection Time</column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn><QueryColumn><Name>dateval</Name><TableName>t_dates</TableName><ColumnName>dateval</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Log File Date</column_title><tooltip></tooltip><group_header_label></group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label></group_trailer_label></Format></QueryColumn></QueryColumns><OrderColumns><OrderColumn><Name>operator_code</Name><OrderType>ASC</OrderType></OrderColumn><OrderColumn><Name>build_code</Name><OrderType>ASC</OrderType></OrderColumn><OrderColumn><Name>dateval</Name><OrderType>ASC</OrderType></OrderColumn></OrderColumns><PreSQLS></PreSQLS></Query><Assignments><Assignment><AssignName>dateval</AssignName><Expression>substr({dateval},0,2).&quot;/&quot;.substr({dateval},3,2).&quot;/&quot;.substr({dateval},6,4)</Expression><Condition></Condition></Assignment><Assignment><AssignName>load_db_time</AssignName><Expression>'** MISSING **'</Expression><Condition>!{load_db_time}</Condition></Assignment></Assignments><Criteria><CriteriaItem><Name>operator</Name><Title>Operator</Title><QueryTableName></QueryTableName><QueryColumnName>operator.operator_id</QueryColumnName><CriteriaType>LOOKUP</CriteriaType><CriteriaDisplay>TEXTFIELD</CriteriaDisplay><ExpandDisplay>MULTI</ExpandDisplay><ReturnColumn>operator_id</ReturnColumn><DisplayColumn>full</DisplayColumn><OverviewColumn>operator_code</OverviewColumn><MatchColumn>legal_name</MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql>operator, cent_user</TableSql><WhereSql> 
AND (
operator.operator_id = cent_user.operator_id
OR cent_user.operator_id IS NULL )
AND cent_user.usernm = USER</WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>operator_id</Name><TableName>operator</TableName><ColumnName>operator_id</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>operator_code</Name><TableName>operator</TableName><ColumnName>operator_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>legal_name</Name><TableName>operator</TableName><ColumnName>legal_name</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>full</Name><TableName></TableName><ColumnName></ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><Assignments><Assignment><AssignName>full</AssignName><Expression>{operator_code}.'/'.{legal_name}</Expression><Condition></Condition></Assignment></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem><CriteriaItem><Name>vehicle</Name><Title>Vehicle</Title><QueryTableName></QueryTableName><QueryColumnName>vehicle.vehicle_code</QueryColumnName><CriteriaType>LOOKUP</CriteriaType><CriteriaDisplay>TEXTFIELD</CriteriaDisplay><ExpandDisplay>MULTI</ExpandDisplay><ReturnColumn>vehicle_code</ReturnColumn><DisplayColumn>full</DisplayColumn><OverviewColumn>vehicle_code</OverviewColumn><MatchColumn>vehicle_id</MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql>vehicle, cent_user</TableSql><WhereSql>  
AND (
vehicle.operator_id = cent_user.operator_id
OR cent_user.operator_id IS NULL )
AND cent_user.usernm = USER  </WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>vehicle_id</Name><TableName>vehicle</TableName><ColumnName>vehicle_id</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>vehicle_code</Name><TableName>vehicle</TableName><ColumnName>vehicle_code</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>vehicle_reg</Name><TableName>vehicle</TableName><ColumnName>vehicle_reg</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>full</Name><TableName></TableName><ColumnName></ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><Assignments><Assignment><AssignName>full</AssignName><Expression>{vehicle_code}.'/'.{vehicle_reg}</Expression><Condition></Condition></Assignment></Assignments></Query><CriteriaLinks><CriteriaLink><LinkFrom>vehicle</LinkFrom><LinkTo>operator</LinkTo><LinkClause>vehicle.operator_id</LinkClause></CriteriaLink></CriteriaLinks></CriteriaItem><CriteriaItem><Name>daterange</Name><Title>Date Range</Title><QueryTableName></QueryTableName><QueryColumnName></QueryColumnName><CriteriaType>DATERANGE</CriteriaType><CriteriaDisplay>DMYFORM</CriteriaDisplay><ExpandDisplay></ExpandDisplay><ReturnColumn></ReturnColumn><DisplayColumn></DisplayColumn><OverviewColumn></OverviewColumn><MatchColumn></MatchColumn><CriteriaDefaults>FIRSTOFMONTH-LASTOFMONTH</CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQL><QuerySql></QuerySql></SQL><QueryColumns></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem></Criteria><Output><PageHeaders><PageHeader><LineNumber>1</LineNumber><HeaderText>{title}</HeaderText><Format><ColumnStartPDF>5%</ColumnStartPDF><justify>center</justify><ColumnWidthPDF>90%</ColumnWidthPDF></Format></PageHeader></PageHeaders><PageFooters><PageFooter><LineNumber>1</LineNumber><FooterText>Page: {page}</FooterText><Format><ColumnStartPDF>5%</ColumnStartPDF><justify>right</justify><ColumnWidthPDF>90%</ColumnWidthPDF></Format></PageFooter><PageFooter><LineNumber>1</LineNumber><FooterText>Centurion RTPI</FooterText><Format><ColumnStartPDF>5%</ColumnStartPDF><justify>left</justify><ColumnWidthPDF>90%</ColumnWidthPDF></Format></PageFooter></PageFooters><DisplayOrders><DisplayOrder><ColumnName>logfile_date</ColumnName><OrderNumber>1</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>load_wlan_time</ColumnName><OrderNumber>2</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>dateval</ColumnName><OrderNumber>3</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>vehicle_code</ColumnName><OrderNumber>4</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>load_db_time</ColumnName><OrderNumber>5</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>operator_code</ColumnName><OrderNumber>6</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>legal_name</ColumnName><OrderNumber>7</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>build_code</ColumnName><OrderNumber>8</OrderNumber></DisplayOrder></DisplayOrders><Groups><Group><GroupName>build_code</GroupName><BeforeGroupHeader>blankline</BeforeGroupHeader><AfterGroupHeader>blankline</AfterGroupHeader><BeforeGroupTrailer>blankline</BeforeGroupTrailer><AfterGroupTrailer>blankline</AfterGroupTrailer><GroupHeaders><GroupHeader><GroupHeaderColumn>operator_code</GroupHeaderColumn></GroupHeader><GroupHeader><GroupHeaderColumn>legal_name</GroupHeaderColumn></GroupHeader><GroupHeader><GroupHeaderColumn>build_code</GroupHeaderColumn></GroupHeader><GroupHeader><GroupHeaderColumn>vehicle_code</GroupHeaderColumn></GroupHeader></GroupHeaders><GroupTrailers></GroupTrailers></Group></Groups><Graphs></Graphs></Output></EntryForm></ReportQuery></Report>